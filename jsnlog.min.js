/* 
 * JSNLog 2.29.0
 * Open source under the MIT License.
 * Copyright 2012-2017 Mattijs Perdeck All rights reserved.
 */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,e,f){if(b==Array.prototype||b==Object.prototype)return b;b[e]=f.value;return b};
$jscomp.getGlobal=function(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var e=0;e<b.length;++e){var f=b[e];if(f&&f.Math==Math)return f}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(b,e){var f=$jscomp.propertyToPolyfillSymbol[e];if(null==f)return b[e];f=b[f];return void 0!==f?f:b[e]};$jscomp.polyfill=function(b,e,f,g){e&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(b,e,f,g):$jscomp.polyfillUnisolated(b,e,f,g))};
$jscomp.polyfillUnisolated=function(b,e,f,g){f=$jscomp.global;b=b.split(".");for(g=0;g<b.length-1;g++){var h=b[g];if(!(h in f))return;f=f[h]}b=b[b.length-1];g=f[b];e=e(g);e!=g&&null!=e&&$jscomp.defineProperty(f,b,{configurable:!0,writable:!0,value:e})};
$jscomp.polyfillIsolated=function(b,e,f,g){var h=b.split(".");b=1===h.length;g=h[0];g=!b&&g in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var p=0;p<h.length-1;p++){var t=h[p];if(!(t in g))return;g=g[t]}h=h[h.length-1];f=$jscomp.IS_SYMBOL_NATIVE&&"es6"===f?g[h]:null;e=e(f);null!=e&&(b?$jscomp.defineProperty($jscomp.polyfills,h,{configurable:!0,writable:!0,value:e}):e!==f&&($jscomp.propertyToPolyfillSymbol[h]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(h):$jscomp.POLYFILL_PREFIX+h,h=
$jscomp.propertyToPolyfillSymbol[h],$jscomp.defineProperty(g,h,{configurable:!0,writable:!0,value:e})))};$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0},e={};try{return e.__proto__=b,e.a}catch(f){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(b,e){b.__proto__=e;if(b.__proto__!==e)throw new TypeError(b+" is not extensible");return b}:null;
$jscomp.polyfill("Object.setPrototypeOf",function(b){return b||$jscomp.setPrototypeOf},"es6","es5");var __extends=this&&this.__extends||function(){var b=function(e,f){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,h){g.__proto__=h}||function(g,h){for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(g[p]=h[p])};return b(e,f)};return function(e,f){function g(){this.constructor=e}b(e,f);e.prototype=null===f?Object.create(f):(g.prototype=f.prototype,new g)}}();
function JL(b){if(!b)return JL.__;Array.prototype.reduce||(Array.prototype.reduce=function(f,g){for(var h=0;h<this.length;h++)g=f(g,this[h],h,this);return g});var e="";return("."+b).split(".").reduce(function(f,g,h,p){e=e?e+("."+g):g;g=f["__"+e];void 0===g&&(JL.Logger.prototype=f,g=new JL.Logger(e),f["__"+e]=g);return g},JL.__)}
(function(b){function e(c,a,d){void 0!==a[c]&&(null===a[c]?delete d[c]:d[c]=a[c])}function f(c){if(null!=b.enabled&&!b.enabled)return!1;try{if(c.userAgentRegex&&!(new RegExp(c.userAgentRegex)).test(navigator.userAgent))return!1}catch(a){}try{if(c.ipRegex&&b.clientIP&&!(new RegExp(c.ipRegex)).test(b.clientIP))return!1}catch(a){}return!0}function g(c,a){try{if(c.disallow&&(new RegExp(c.disallow)).test(a))return!1}catch(d){}return!0}function h(c){return"function"==typeof c?c instanceof RegExp?c.toString():
c():c}function p(c){c=h(c);switch(typeof c){case "string":return new r(c,null,c);case "number":var a=c.toString();return new r(a,null,a);case "boolean":return a=c.toString(),new r(a,null,a);case "undefined":return new r("undefined",null,"undefined");case "object":if(c instanceof RegExp||c instanceof String||c instanceof Number||c instanceof Boolean)return a=c.toString(),new r(a,null,a);a="function"===typeof b.serialize?b.serialize.call(this,c):JSON.stringify(c);return new r("",c,a);default:return new r("unknown",
null,"unknown")}}function t(c,a,d,l){b.entryId++;l=void 0===l?void 0:new x(l.traceId,l.spanId,l.parentSpanId);return new y(c,a,d,b._getTime(),b.entryId,l)}function z(c){c.id&&(clearTimeout(c.id),c.id=null)}function A(c,a,d){var l=this;c.id||(c.id=setTimeout(function(){d.call(l)},a))}b.requestId="";b.entryId=0;b._createXMLHttpRequest=function(){return new XMLHttpRequest};b._getTime=function(){return(new Date).getTime()};b._console=console;b._appenderNames=[];var r=function(){return function(c,a,d){this.msg=
c;this.meta=a;this.finalString=d}}();b.setOptions=function(c){e("enabled",c,this);e("maxMessages",c,this);e("defaultAjaxUrl",c,this);e("clientIP",c,this);e("requestId",c,this);e("defaultBeforeSend",c,this);e("serialize",c,this);e("traceContextProvider",c,this);return this};b.getAllLevel=function(){return-2147483648};b.getTraceLevel=function(){return 1E3};b.getDebugLevel=function(){return 2E3};b.getInfoLevel=function(){return 3E3};b.getWarnLevel=function(){return 4E3};b.getErrorLevel=function(){return 5E3};
b.getFatalLevel=function(){return 6E3};b.getOffLevel=function(){return 2147483647};var q=function(){return function(c,a){this.inner=a;this.name="JL.Exception";this.message=p(c).finalString}}();b.Exception=q;q.prototype=Error();var y=function(){return function(c,a,d,l,m,k){this.l=c;this.m=a;this.n=d;this.t=l;this.u=m;this.c=k}}();b.LogItem=y;var x=function(){return function(c,a,d){this.d=c;this.s=a;this.p=d}}();b.LogTraceContext=x;q=function(){function c(a,d){this.appenderName=a;this.sendLogItems=
d;this.level=b.getTraceLevel();this.sendWithBufferLevel=2147483647;this.storeInBufferLevel=-2147483648;this.bufferSize=0;this.batchSize=1;this.maxBatchSize=20;this.batchTimeout=2147483647;this.sendTimeout=5E3;this.buffer=[];this.batchBuffer=[];this.batchTimeoutTimer={id:null};this.sendTimeoutTimer={id:null};this.nbrLogItemsBeingSent=this.nbrLogItemsSkipped=0;if(void 0==a)throw"Trying to create an appender without a name or with an empty name";if(-1!=b._appenderNames.indexOf(a)){if(!a)throw"Trying to create an appender without a name or with an empty name";
throw"Multiple appenders use the same name "+a;}b._appenderNames.push(a)}c.prototype.addLogItemsToBuffer=function(a){if(this.batchBuffer.length>=this.maxBatchSize)this.nbrLogItemsSkipped+=a.length;else{if(null!=b.maxMessages){if(1>b.maxMessages)return;b.maxMessages-=a.length}this.batchBuffer=this.batchBuffer.concat(a);var d=this;A(this.batchTimeoutTimer,this.batchTimeout,function(){d.sendBatch.call(d)})}};c.prototype.batchBufferHasOverdueMessages=function(){for(var a=0;a<this.batchBuffer.length;a++)if(b._getTime()-
this.batchBuffer[a].t>this.batchTimeout)return!0;return!1};c.prototype.batchBufferHasStrandedMessage=function(){return null!=b.maxMessages&&1>b.maxMessages&&0<this.batchBuffer.length};c.prototype.sendBatchIfComplete=function(){(this.batchBuffer.length>=this.batchSize||this.batchBufferHasOverdueMessages()||this.batchBufferHasStrandedMessage())&&this.sendBatch()};c.prototype.onSendingEnded=function(){z(this.sendTimeoutTimer);this.nbrLogItemsBeingSent=0;this.sendBatchIfComplete()};c.prototype.setOptions=
function(a){e("level",a,this);e("ipRegex",a,this);e("userAgentRegex",a,this);e("disallow",a,this);e("sendWithBufferLevel",a,this);e("storeInBufferLevel",a,this);e("bufferSize",a,this);e("batchSize",a,this);e("maxBatchSize",a,this);e("batchTimeout",a,this);e("sendTimeout",a,this);this.bufferSize<this.buffer.length&&(this.buffer.length=this.bufferSize);if(this.maxBatchSize<this.batchSize)throw new b.Exception({message:"maxBatchSize cannot be smaller than batchSize",maxBatchSize:this.maxBatchSize,batchSize:this.batchSize});
return this};c.prototype.log=function(a,d,l,m,k,n,u,B){!f(this)||!g(this,n)||k<this.storeInBufferLevel||(a=t(k,n,u,B),k<this.level?0<this.bufferSize&&(this.buffer.push(a),this.buffer.length>this.bufferSize&&this.buffer.shift()):(this.addLogItemsToBuffer([a]),k>=this.sendWithBufferLevel&&this.buffer.length&&(this.addLogItemsToBuffer(this.buffer),this.buffer.length=0),this.sendBatchIfComplete()))};c.prototype.sendBatch=function(){if(!(0<this.nbrLogItemsBeingSent)&&(z(this.batchTimeoutTimer),0!=this.batchBuffer.length)){this.nbrLogItemsBeingSent=
this.batchBuffer.length;var a=this;A(this.sendTimeoutTimer,this.sendTimeout,function(){a.onSendingEnded.call(a)});this.sendLogItems(this.batchBuffer,function(){a.batchBuffer.splice(0,a.nbrLogItemsBeingSent);0<a.nbrLogItemsSkipped&&(a.batchBuffer.push(t(4E3,"Lost "+a.nbrLogItemsSkipped+" messages. Either connection with the server was down or logging was disabled via the enabled option. Reduce lost messages by increasing the ajaxAppender option maxBatchSize.",a.appenderName)),a.nbrLogItemsSkipped=
0);a.onSendingEnded.call(a)})}};return c}();b.Appender=q;var v=function(c){function a(d){d=c.call(this,d,a.prototype.sendLogItemsAjax)||this;d.xhr=b._createXMLHttpRequest();return d}__extends(a,c);a.prototype.setOptions=function(d){e("url",d,this);e("beforeSend",d,this);c.prototype.setOptions.call(this,d);return this};a.prototype.sendLogItemsAjax=function(d,l){try{if(f(this)){var m=this.xhr.readyState;0!=m&&4!=m&&this.xhr.abort();m="/jsnlog.logger";null!=b.defaultAjaxUrl&&(m=b.defaultAjaxUrl);this.url&&
(m=this.url);this.xhr.open("POST",m);this.xhr.setRequestHeader("Content-Type","application/json");this.xhr.setRequestHeader("JSNLog-RequestId",b.requestId);var k=this;this.xhr.onreadystatechange=function(){4==k.xhr.readyState&&200<=k.xhr.status&&300>k.xhr.status&&l()};var n={r:b.requestId,lg:d};"function"===typeof this.beforeSend?this.beforeSend.call(this,this.xhr,n):"function"===typeof b.defaultBeforeSend&&b.defaultBeforeSend.call(this,this.xhr,n);var u=JSON.stringify(n);this.xhr.send(u)}}catch(B){}};
return a}(q);b.AjaxAppender=v;var w=function(c){function a(d){return c.call(this,d,a.prototype.sendLogItemsConsole)||this}__extends(a,c);a.prototype.clog=function(d){b._console.log(d)};a.prototype.cerror=function(d){b._console.error?b._console.error(d):this.clog(d)};a.prototype.cwarn=function(d){b._console.warn?b._console.warn(d):this.clog(d)};a.prototype.cinfo=function(d){b._console.info?b._console.info(d):this.clog(d)};a.prototype.cdebug=function(d){b._console.debug?b._console.debug(d):this.cinfo(d)};
a.prototype.sendLogItemsConsole=function(d,l){try{if(!f(this)||!b._console)return;var m;for(m=0;m<d.length;++m){var k=d[m],n=k.n+": "+k.m;"undefined"===typeof window&&(n=new Date(k.t)+" | "+n);k.l<=b.getDebugLevel()?this.cdebug(n):k.l<=b.getInfoLevel()?this.cinfo(n):k.l<=b.getWarnLevel()?this.cwarn(n):this.cerror(n)}}catch(u){}l()};return a}(q);b.ConsoleAppender=w;q=function(){function c(a){this.loggerName=a;this.seenRegexes=[]}c.prototype.setOptions=function(a){e("level",a,this);e("userAgentRegex",
a,this);e("disallow",a,this);e("ipRegex",a,this);e("appenders",a,this);e("onceOnly",a,this);this.seenRegexes=[];return this};c.prototype.buildExceptionObject=function(a){var d={};a.stack?d.stack=a.stack:d.e=a;a.message&&(d.message=a.message);a.name&&(d.name=a.name);a.data&&(d.data=a.data);a.inner&&(d.inner=this.buildExceptionObject(a.inner));return d};c.prototype.log=function(a,d,l,m){var k=0;if(!this.appenders)return this;if(a>=this.level&&f(this)&&(l?(k=this.buildExceptionObject(l),k.logData=h(d)):
k=d,d=p(k),g(this,d.finalString))){if(this.onceOnly)for(k=this.onceOnly.length-1;0<=k;){if((new RegExp(this.onceOnly[k])).test(d.finalString)){if(this.seenRegexes[k])return this;this.seenRegexes[k]=!0}k--}"function"===typeof b.traceContextProvider&&(k=b.traceContextProvider(),void 0!==k&&(m=k));d.meta=d.meta||{};for(k=this.appenders.length-1;0<=k;)this.appenders[k].log(1E3>=a?"trace":2E3>=a?"debug":3E3>=a?"info":4E3>=a?"warn":5E3>=a?"error":"fatal",d.msg,d.meta,function(){},a,d.finalString,this.loggerName,
m),k--}return this};c.prototype.trace=function(a,d){return this.log(1E3,a,void 0,d)};c.prototype.debug=function(a,d){return this.log(2E3,a,void 0,d)};c.prototype.info=function(a,d){return this.log(3E3,a,void 0,d)};c.prototype.warn=function(a,d){return this.log(4E3,a,void 0,d)};c.prototype.error=function(a,d){return this.log(5E3,a,void 0,d)};c.prototype.fatal=function(a,d){return this.log(6E3,a,void 0,d)};c.prototype.fatalException=function(a,d,l){return this.log(6E3,a,d,l)};return c}();b.Logger=q;
b.createAjaxAppender=function(c){return new v(c)};b.createConsoleAppender=function(c){return new w(c)};q="undefined"!==typeof window?new v(""):new w("");b.__=new b.Logger("");b.__.setOptions({level:b.getDebugLevel(),appenders:[q]})})(JL||(JL={}));"undefined"!==typeof exports&&(exports.__esModule=!0,exports.JL=JL);var define;"function"==typeof define&&define.amd&&define("jsnlog",[],function(){return JL});"function"==typeof __jsnlog_configure&&__jsnlog_configure(JL);
"undefined"===typeof window||window.onerror||(window.onerror=function(b,e,f,g,h){JL("onerrorLogger").fatalException({msg:"Uncaught Exception",errorMsg:b?b.message||b:"",url:e,"line number":f,column:g},h);return!1});"undefined"===typeof window||window.onunhandledrejection||(window.onunhandledrejection=function(b){JL("onerrorLogger").fatalException({msg:"unhandledrejection",errorMsg:b.reason?b.reason.message:b.message||null},b.reason)});
